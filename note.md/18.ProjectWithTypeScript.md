# React, Next with TypeScript

# 🔥 React

## 타입스크립트 세팅하기

React와 Next.js 프로젝트를 생성할 때 자주 사용하는 방법들을 위주로, 프로젝트에 타입스크립트를 세팅하는 방법을 알아보자!

Create React App, Vite, Create Next App이라는 도구들을 위주로 다룰 건데, 골라서 확인하자.

그리고 기존에 자바스크립트로 만든 프로젝트를 타입스크립트로 바꾸다 보면, 종종 외부 패키지에서 타입을 찾을 수 없는 경우가 있는데, 마지막에 대처하는 방법을 확인해주세요!

## TypeScript로 프로젝트 생성하기

Create React App에서는 "템플릿"이라는 게 있습니다. 템플릿은 만들 프로젝트의 형태들을 미리 세팅해 놓은 틀이라고 할 수 있는데요. 여러 가지 템플릿들이 있는데, 그중에 타입스크립트 템플릿을 선택해서 프로젝트를 생성할 겁니다.

### 터미널에 익숙하지 않은 경우

우선 프로젝트를 위한 폴더를 하나 만드세요. 그리고 그 폴더를 VS Code에서 열어주세요.

![](https://velog.velcdn.com/images/pmj9498/post/5c05f4c3-039b-4ca1-a05a-ab435d2203e2/image.png)

예를 들어서 저는 `typescript-react`라는 폴더를 만들었는데요. 제대로 진행하셨다면 VS Code 왼쪽 위에 폴더 이름이 보이고, 터미널을 열었을 때는 현재 폴더를 보여주는 위치에 `typescript-react`라는 폴더 이름이 보입니다.

터미널에서 아래 명령어를 입력해서 프로젝트를 생성할게요.

```
npx create-react-app . --template typescript
```

여기서 마침표(`.`)는 현재 폴더라는 의미인데요. VS Code에서는 기본적으로 터미널을 열면 현재 열린 폴더에서 터미널을 열어주기 때문에, 마침표를 입력하면 현재 폴더, 즉 VS Code가 열어 놓은 폴더에 프로젝트를 생성하게 됩니다. `--template`은 유닉스 커맨드에서 옵션을 사용하는 부분인데요. `template`라는 옵션으로 `typescript`를 사용하겠다는 의미입니다.  
명령어를 풀어서 표현하자면 **"Create React App이라는 걸 사용해서 현재 폴더에 프로젝트를 만드는데, 템플릿은 타입스크립트 템플릿을 사용하겠다"**라고 할 수 있겠죠?

제대로 생성하셨다면 `tsconfig.json` 파일과 함께 프로젝트가 생성됩니다.

### 터미널에 익숙한 경우

터미널에서 프로젝트를 생성할 경로로 들어간 다음 아래와 같은 명령어로 생성할 수 있습니다.

```
npx create-react-app 원하는_폴더_이름 --template typescript
```

## JavaScript 프로젝트를 TypeScript로 마이그레이션 하기

아이폰에 있던 주소록을 안드로이드로 옮기는 것처럼, IT 분야에서 데이터나 소프트웨어 같은 걸 한 시스템에서 다른 시스템으로 옮기는 걸 **마이그레이션(Migration)**이라고 부릅니다. Create React App으로 이미 생성한 자바스크립트 프로젝트가 있다면, **프로젝트를 마이그레이션을 하는 가장 쉬운 방법은 타입스크립트 템플릿으로 새로운 프로젝트를 생성한 다음, 기존 소스코드 파일들을 복사해 오는 건데요.** 이 순서로 한번 진행해 볼게요.

### 새로운 프로젝트를 타입스크립트 템플릿으로 생성하기

위쪽의 "TypeScript로 프로젝트 생성하기"를 참고해서 원하는 위치에 프로젝트를 생성해 주세요. 필요한 파일을 복사하는 용도이기 때문에 위치는 크게 상관없습니다.

### 기존 소스코드 파일 복사하기

새롭게 생성한 프로젝트의 `src` 폴더에서 아래 파일들을 제외하고 모두 지워주세요.

![](https://velog.velcdn.com/images/pmj9498/post/85dbd790-9949-4d54-9883-829d4125b199/image.png)

만약 성능 측정 기능(`reportWebVitals.ts` 파일) 그리고 테스트 기능(`setupTests.ts` 파일)을 사용하지 않는다면 이것들도 지워도 괜찮습니다. 하지만 **`src/react-app-env.d.ts` 파일은 반드시 남겨두어야 합니다!** 이 파일은 Create React App에서 미리 세팅해 놓은 타입들을 불러오는 파일이기 때문이죠.

혹시 `react-app-env.d.ts` 파일의 내용이 궁금하신 분들은 파일을 열고 `react-scripts`라는 부분에 마우스 커서를 가져가 보세요. Windows에서는 `Ctrl` + 클릭, macOS에서는 `Cmd` + 클릭해 보시면 타입 정의를 볼 수 있습니다. 프로젝트에서 사용하는 여러 파일 확장자에 대한 타입이 정의되어 있습니다.  
지금은 일단 넘어갈게요. 이런 타입 정의에 대해서는 나중에 CSS 파일, 이미지 파일 등의 타입을 다룰 때 다시 살펴보도록 하겠습니다.

![](https://velog.velcdn.com/images/pmj9498/post/3f1dc056-5831-4c62-86a1-60a572e46e7f/image.png)
기존 프로젝트의 소스코드에서 `src` 폴더에 있는 파일들을 복사해서 새로운 프로젝트의 `src` 폴더로 붙여 넣습니다. 마찬가지로 새로운 프로젝트의 `public` 폴더에 있는 파일들을 지우고, 기존 프로젝트의 코드도 옮겨줍니다.

### 파일 확장자 바꾸기

이제 `src` 폴더에 있는 자바스크립트 파일의 확장자를 타입스크립트로 바꾸면 됩니다. 파일에 JSX 문법이 있다면 `.tsx`로 확장자를 바꾸고, 일반적인 자바스크립트 파일이라면 `.ts`로 확장자를 바꿔주세요.

### 💢 내가 쓴 코드가 바로 실행이 안 돼요!

기존 자바스크립트 파일을 타입스크립트 파일로 바꿨지만 아직 자바스크립트 문법으로 작성된 코드라서 당장은 타입 오류가 날 수도 있습니다. 공부하면서 조금씩 고쳐 보세요.

# 🔥 Next

> 📎 [공식문서에서 제공하는 가이드](https://nextjs.org/docs/pages/building-your-application/configuring/typescript)

## TypeScript로 프로젝트 생성하기

### 터미널에 익숙하지 않은 경우

```
npx create-next-app .
```

> 명령어를 풀어서 표현하자면 "Create Next App"이라는 걸 사용해서 현재 폴더에 프로젝트를 만든다는 의미

![](https://velog.velcdn.com/images/pmj9498/post/99d5e30e-dbd0-4caa-8308-dd38d321478b/image.png)

그럼 이렇게 타입스크립트를 사용할 거냐고 물어보는데요. **Yes**를 선택하고 엔터를 입력하고, 프로젝트 생성을 계속 진행하면 됩니다.

### 터미널에 익숙한 경우

```
npx create-next-app 원하는_폴더_이름
```

마찬가지로 TypeScript를 사용할 거냐고 물어볼 때 Yes를 선택해서 프로젝트를 생성하세요.

## 프로젝트를 TypeScript로 마이그레이션 하기

아이폰에 있던 주소록을 안드로이드로 옮기는 것처럼 프로그래밍에서 데이터나 소프트웨어 같은 걸 한 시스템에서 다른 시스템으로 옮기는 걸 마이그레이션(Migration)이라고 합니다. Next.js에서는 마이그레이션도 편리하게 제공합니다.

### 파일 확장자 바꾸기

우선 폴더에 있는 자바스크립트 파일의 확장자를 타입스크립트로 바꿔줍니다. 파일에 JSX 문법이 있는 `.jsx` 파일은 `.tsx`로 확장자를 바꾸고, 일반적인 `.js` 자바스크립트 파일이라면 `.ts`로 확장자를 바꿔주세요.

### 개발모드 실행하기

터미널에서 아래 명령어를 입력해 Next.js 개발모드를 실행합니다. 한 번 실행하면 타입스크립트 파일을 인식해고 알아서 `tsconfig.json` 같은 필요한 파일들을 생성해 줍니다.

```
npm run dev
```

### 💢 내가 쓴 코드가 바로 실행이 안 돼요!

기존 자바스크립트 파일을 타입스크립트 파일로 바꿨지만 아직 자바스크립트 문법으로 작성된 코드라서 당장은 타입 오류가 날 수도 있습니다. 공부하면서 조금씩 고쳐 보세요.

# ❗ 기존 패키지에서 타입을 찾을 수 없을 때

기존에 프로젝트에서 리액트 말고도 다른 패키지를 쓴 게 있나요? 그런 경우에는 추가로 타입을 설치해줘야 할 수도 있는데요. 이번 레슨에서는 기존 패키지에서 타입을 찾을 수 없을 때 대처하는 방법에 대해 알아보겠습니다.

## `@types` 타입 설치하기

사용하던 패키지 중에 타입스크립트 파일로 바꾸고 나면 가끔 아래 스크린샷처럼 import 구문에서 주의 표시가 나오는 경우가 있습니다.

![](https://velog.velcdn.com/images/pmj9498/post/f75758f0-af70-41f3-ab09-e2adbfef1efb/image.png)

에러 메시지를 읽어보면 타입 정의 파일이 없다고 하는데요.` @types/react-modal` 이라는 패키지를 설치하라고 가이드하고 있네요. 가이드에 따라서 설치하면 해결됩니다. 이때 타입스크립트는 개발할 때만 사용하는 거니까 `--save-dev` 옵션으로 설치하는 것 잊지마세요.

```
npm install --save-dev @types/패키지_이름
```

참고로 모든 패키지를 이렇게 설치해야 하는 건 아닙니다. 어떤 패키지들은 `@types` 패키지를 사용하고 어떤 패키지는 사용하지 않아도 되는데요. 타입을 찾을 수 없다고 오류가 난다면 `@types/`를 패키지 이름 앞에 붙여서 설치해주면 됩니다.
