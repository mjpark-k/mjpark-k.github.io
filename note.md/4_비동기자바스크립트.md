# ğŸŒ»ë¹„ë™ê¸° ìë°”ìŠ¤í¬ë¦½íŠ¸
javascriptì˜ ê½ƒ

### ì½œë°±(callback)ì´ë€?
ì–´ë–¤ í•¨ìˆ˜ì˜ ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜ë¥¼ **ì½œë°±** ë˜ëŠ” **ì½œë°± í•¨ìˆ˜**ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

```js
// function í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ í•¨ìˆ˜ë¥¼ ì½œë°±ìœ¼ë¡œ ì‚¬ìš©(ì½œë°± íŒŒë¼ë¯¸í„° ì—†ìŒ)
function printMessage(func) {
  console.log('Printing message...');
  func();
}

function sayHello() {
  console.log('Hello World!');
}

printMessage(sayHello);
```
```
Printing message...
Hello World!
```
```js
// Arrow Functionì„ ì½œë°±ìœ¼ë¡œ ì‚¬ìš©(ì½œë°± íŒŒë¼ë¯¸í„° ì—†ìŒ)
function printMessage(func) {
  console.log('Printing message...');
  func();
}

printMessage(() => console.log('Hello World!'));
```
```
Printing message...
Hello World!
```
```js
// function í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ í•¨ìˆ˜ë¥¼ ì½œë°±ìœ¼ë¡œ ì‚¬ìš©(ì½œë°± íŒŒë¼ë¯¸í„° ìˆìŒ)
function printMessageWithParams(func, name) {
  console.log('Printing message...');
  func(name);
}

function sayHello(name) {
  console.log(`Hello ${name}!`);
}

printMessageWithParams(sayHello, 'Bob');
```
```
Printing message...
Hello Bob!
```
```js
// Arrow Functionì„ ì½œë°±ìœ¼ë¡œ ì‚¬ìš©(ì½œë°± íŒŒë¼ë¯¸í„° ìˆìŒ)
function printMessageWithParams(func, name) {
  console.log('Printing message...');
  func(name);
}

printMessageWithParams((name) => console.log(`Hello ${name}!`), 'Bob');
```
```
Printing message...
Hello Bob!
```

### ì½œë°±ê³¼ ë¹„ë™ê¸° í•¨ìˆ˜
`setTimeout()` í•¨ìˆ˜ëŠ” íŠ¹ì • ì‹œê°„ì´ ì§€ë‚œ í›„ì— ì½œë°±ì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆì—ëŠ” í•¨ìˆ˜ ì•„ë˜ì— ìˆëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```js
console.log('1');

setTimeout(() => console.log('2'), 3000);

console.log('3');
```
```
1
3
2
```
![alt text](/images/ë¹„ë™ê¸°.png)
`setTimeout()` í•¨ìˆ˜ëŠ” ë‚´ìš©ì„ ëê¹Œì§€ ë‹¤ ì‹¤í–‰í•˜ì§€ ì•Šê³  ì¤‘ê°„ì— ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë‹¤ê°€ ë‹¤ì‹œ í•¨ìˆ˜ ì•ˆìœ¼ë¡œ ëŒì•„ì˜¤ëŠ”ë°ìš”. ì´ëŸ° í•¨ìˆ˜ë¥¼ **ë¹„ë™ê¸° í•¨ìˆ˜**ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. ì½œë°±ì„ ì´ìš©í•˜ë©´ ë‚˜ì¤‘ì— í•  ì‘ì—…ì„ í•¨ìˆ˜ í˜•íƒœë¡œ ì „ë‹¬í•´ ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° í•¨ìˆ˜ì— ë§ì´ ì“°ì…ë‹ˆë‹¤.

[ë‹¤ë¥¸ ë¹„ë™ê¸° í•¨ìˆ˜ë“¤](https://www.codeit.kr/topics/asynchronous-javascript/lessons/6183)(`setInterval()`, DOMì˜ `addEventListener()` ë“±)ì„  ìì„¸íˆ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì½œë°±ì˜ í•œê³„(callback Hell)
ì½œë°±ì„ ì´ìš©í•´ì„œ ë¹„ë™ê¸° í”„ë¡œê·¸ë¨ì„ ì§¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì€ ì¢‹ì§€ë§Œ í•œê³„ì ì´ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì„ ì—°ì†ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
```js
// ì§ì› ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„ ë¦¬ìŠ¤í°ìŠ¤ë¥¼ íŒŒì‹±í•˜ê³  ë°ì´í„°ë¥¼ í”„ë¡œì„¸ì‹± í•˜ëŠ” ì˜ˆì‹œ
getEmployees((response) => {
  json(response, (data) => {
    groupEmployees(data, (result) => {
      console.log(result);
    });
  });
});
```
ì½œë°± ê¸°ë°˜ ì½”ë“œëŠ” ëª¨ë“  ì‘ì—…ì„ í•¨ìˆ˜ ì•ˆì—ì„œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì‘ì—…ì„ ì´ì–´ì„œ í•˜ë ¤ë©´ ì½œë°± ì•ˆì— ì½œë°±ì„ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì½œë°±ì„ ì¤‘ì²©í•´ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ëŸ° í˜„ìƒì„ **ì½œë°± í—¬(callback Hell)**ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. 

ì½œë°± í—¬(callback Hell)ë¡œ ì¸í•´ ì½”ë“œë¥¼ ì´í•´í•˜ê¸°ë„ í˜ë“¤ê³ , ë””ë²„ê¹…ì´ë‚˜ í…ŒìŠ¤íŒ… ê°™ì€ ê±¸ í•˜ê¸°ë„ ì–´ë µê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ë¶ˆí¸í•¨ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ **Promise**ê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.

### Promise
> **Promise**ëŠ” ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ê°’ì„ ì•Œë ¤ì£¼ëŠ” ê°ì²´ì…ë‹ˆë‹¤.

- Pending: ë¹„ë™ê¸° ì‘ì—…ì´ ëë‚˜ê¸°ë¥¼ ê¸°ë‹¤ë¦´ ë•Œ
- Fulfilled: ë¹„ë™ê¸° ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ëë‚¬ì„ ë•Œ, ë¹„ë™ê¸° ì‘ì—…ì˜ ì„±ê³µ ê²°ê³¼ë¥¼ ê²°ê´ê°’ìœ¼ë¡œ ê°–ê²Œ ë¨.
- Rejected: ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ, ë¹„ë™ê¸° ì‘ì—…ì—ì„œ ë°œìƒí•œ ì˜¤ë¥˜ë¥¼ ê²°ê´ê°’ìœ¼ë¡œ ê°–ê²Œ ë¨.

PromiseëŠ” ì´ë ‡ê²Œ ì„¸ ê°€ì§€ ìƒíƒœë¥¼ ê°–ê³ ìˆìŠµë‹ˆë‹¤.

### `async`, `await` ë¬¸ë²•
> `async` / `await`ë¬¸ë²•ì€ Promise ê°ì²´ë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.

```js
const result = await Promise;

// ì˜ˆì‹œ
const response = await fetch('https://learn.codeit.kr/api/employees');
```
Promise ê°ì²´ ì•ì— `awiat` í‚¤ì›Œë“œë¥¼ ì“°ë©´ Promiseì˜ ìƒíƒœê°€ fulfilled ë˜ëŠ” rejectedê°€ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
- Fulfilled ìƒíƒœê°€ ë˜ë©´ Promise ê°ì²´ì˜ ê²°ê´ê°’ì„ ë¦¬í„´
- Rejected ìƒíƒœê°€ ë˜ë©´ Promise ê°ì²´ì˜ ê²°ê´ê°’(error)ì„ throwí•©ë‹ˆë‹¤.

> Promise ê°ì²´ì˜ ê°’ì„ ê°€ì ¸ì˜¤ë ¤ë©´ í•­ìƒ ì•ì— `await`ì„ ê¼­ ë¶™ì—¬ì•¼ í•©ë‹ˆë‹¤.

`await`ì€ ë³´í†µ `async` í•¨ìˆ˜ ì•ˆì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. ES ëª¨ë“ˆì˜ ê²½ìš°, í•¨ìˆ˜ ë°”ê¹¥ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
// ì¼ë°˜ function
async function printEmployees() {
  const response = await fetch('https://learn.codeit.kr/api/employees');
  const data = await response.json();
  console.log(data);
}

// Arrow function
const printEmployees = async () => {
  const response = await fetch('https://learn.codeit.kr/api/employees');
  const data = await response.json();
  console.log(data);
}
```
`async` í•¨ìˆ˜ëŠ” ì•ˆì—ì„œ `awiat`ì„ ë§ˆì£¼ì¹˜ë©´, í•¨ìˆ˜ ë°”ê¹¥ìœ¼ë¡œ ë‚˜ê°€ì„œ ë‚˜ë¨¸ì§€ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë‹¤ê°€ Promise ê°ì²´ê°€ fulfilled ë˜ëŠ” rejected ìƒíƒœê°€ ë˜ë©´ ë‹¤ì‹œ í•¨ìˆ˜ ì•ˆìœ¼ë¡œ ëŒì•„ì™€ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```js
async function printEmployees() {
  const response = await fetch('https://learn.codeit.kr/api/employees');
  const data = await response.json();
  console.log(data);
}

printEmployees();

console.log('Task 2');
console.log('Task 3');
```
```
Task 2
Task 3
[
  {
    id: 1,
    name: 'Jason',
    email: 'jason@codeitmall.kr',
    department: 'engineering'
  },
  ...
]
```
`async` í•¨ìˆ˜ëŠ” í•­ìƒ Promiseë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
- í•¨ìˆ˜ ì•ˆì—ì„œ Promiseë¥¼ ë¦¬í„´í•˜ë©´ ê·¸ Promiseë¥¼ ê·¸ëŒ€ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤.
- í•¨ìˆ˜ ì•ˆì—ì„œ í‰ë²”í•œ ê°’ì„ ë¦¬í„´í•˜ë©´ ê·¸ ê°’ì„ ê²°ê´ê°’ìœ¼ë¡œ ê°–ëŠ” Promiseë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ `async` í•¨ìˆ˜ì—ì„œ ë¦¬í„´í•˜ëŠ” ê°’ì„ ê°€ì ¸ì˜¤ë ¤ë©´ `await`ì„ í™œìš©í•´ì•¼ í•©ë‹ˆë‹¤.
```js
async function getEmployees() {
  const response = await fetch('https://learn.codeit.kr/api/employees');
  const data = await response.json();
  return data;
}

const employees = await getEmployees(); // awaitì„ ìƒëµí•˜ë©´ employeesì— Promise ê°ì²´ê°€ í• ë‹¹ë©ë‹ˆë‹¤.
```

### ì˜¤ë¥˜ ì²˜ë¦¬
try, catchë¥¼ ì´ìš©í•´ì„œ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```js
async function printEmployees() {
  try {
    const response = await fetch('https://learn.codeit.krrrrr/api/employees');
    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.log('error!');
  }
}
```
ì˜¤ë¥˜ê°€ ë°œìƒí•  ë§Œí•œ ì½”ë“œë¥¼ `try`ë¡œ ê°ì‹¸ ì£¼ê³ , `catch` ì•ˆì—ì„œ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤. ë°œìƒí•œ ì˜¤ë¥˜ëŠ” `catch`ë¬¸ì˜ error ë³€ìˆ˜ì— ì „ë‹¬ë˜ê¸° ë•Œë¬¸ì— ì´ê±¸ í™œìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½ `try`, `catch`ë¬¸ì˜ ê²°ê³¼ì™€ ìƒê´€ì—†ì´ ëì— í•­ìƒ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ì½”ë“œê°€ ìˆë‹¤ë©´ `finally`ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

```js
async function printEmployees() {
  try {
    const response = await fetch('https://learn.codeit.krrrrr/api/employees');
    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.log('error!');
    return;
  } finally {
    console.log('finished');
  }
}
```
ìœ„ ì½”ë“œì—ì„œ, ì˜¤ë¥˜ê°€ ë°œìƒí•´ì„œ `catch` ë¬¸ì—ì„œ `return`ì„ í•´ë„ `console.log('finished')`ëŠ” ì‹¤í–‰ë©ë‹ˆë‹¤.

### `.then()` ë©”ì†Œë“œ
`.then()`ì€ Promise ê°ì²´ì˜ ë©”ì†Œë“œì…ë‹ˆë‹¤.
```js
fetch('https://learn.codeit.kr/api/employees')
  .then((response) => response.json())
  .then((data) => console.log(data));

console.log('Task 2');
console.log('Task 3');
```
```
Task 2
Task 3
[
  {
    id: 1,
    name: 'Jason',
    email: 'jason@codeitmall.kr',
    department: 'engineering'
  },
  ...
]
```
`.then()`ì€ ì•ì„  Promise ê°ì²´ê°€ fulfilled ìƒíƒœê°€ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ fulfilled ìƒíƒœê°€ ë˜ë©´ ì•ˆì— ìˆëŠ” ì½œë°±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ ì•ì„  Promiseì˜ ê²°ê´ê°’ì„ ì½œë°±ì˜ ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ì•ì„  Promiseë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆì—ëŠ” ì´í›„ì— ìˆëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  `.then()`ë„ í•­ìƒ Promiseë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
- `.then()`ì•ˆì˜ ì½œë°±ì´ Promiseë¥¼ ë¦¬í„´í•  ê²½ìš° Promiseë¥¼ ê·¸ëŒ€ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤.
- `.then()`ì•ˆì˜ ì½œë°±ì´ í‰ë²”í•œ ê°’ì„ ë¦¬í„´í•  ê²½ìš° ì´ ê°’ì„ ê²°ê´ê°’ìœ¼ë¡œ ê°€ì§€ëŠ” Promiseë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ `.then()`ì„ ì—°ê²°í•´ì„œ ì“¸ ìˆ˜ ìˆê³ , ì´ê±¸ Promise ì²´ì¸ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

### `.then()` ì˜¤ë¥˜ ì²˜ë¦¬
Promise ì²´ì¸ì—ì„œëŠ” `.catch()`, `.finally()` ë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
fetch('https://learn.codeit.krrrr/api/employees')
  .then((response) => response.json())
  .then((data) => console.log(data))
  .catch((error) => console.log('error!'))
  .finally(() => console.log('finished'));
```
- `.then()`ì€ ì•ì„  Promiseê°€ fulfilled ìƒíƒœê°€ ë˜ë©´ ì•ˆì— ìˆëŠ” ì½œë°±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ ì•ì„  Promiseì˜ ê²°ê´ê°’ì„ ì½œë°±ì˜ ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
- `.catch()`ëŠ” ì•ì„  Promiseê°€ rejected ìƒíƒœê°€ ë˜ë©´ ì•ˆì— ìˆëŠ” ì½œë°±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ ì•ì„  Promiseì˜ ê²°ê´ê°’(ì˜¤ë¥˜)ì„ ì½œë°±ì˜ ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
- `.finally()`ëŠ” ì•ì„  Promiseê°€ fulfilled ë˜ëŠ” rejected ìƒíƒœê°€ ë˜ë©´ ì•ˆì— ìˆëŠ” ì½œë°±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

`.then()`ì˜ ê²½ìš° ì•ì„  Promiseê°€ rejected ìƒíƒœê°€ ë˜ë©´ ì½œë°±ì„ ì‹¤í–‰í•˜ì§€ ì•Šê³ , ì•ì„  Promiseë¥¼ ê·¸ëŒ€ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤. ë”°ë¼ì„œ rejectedëœ PromiseëŠ” `.catch()` ì „ê¹Œì§€ ì „íŒŒë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° `.catch()`ì™€ `.finally()`ë¥¼ Promise ì²´ì¸ ë§ˆì§€ë§‰ ë¶€ë¶„ì— ì”ë‹ˆë‹¤.


### `Promise.all()`
`Promise.all([p1, p2, p3, ...])`ì€ ì—¬ëŸ¬ Promiseë¥¼ ë™ì‹œì— ê¸°ë‹¤ë¦´ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. `Promise.all()` ìì²´ë„ Promiseë¥¼ ë¦¬í„´í•˜ëŠ”ë°ìš”. ì•„ë˜ì™€ ê°™ì´ ìƒíƒœê°€ ë°”ë€ë‹ˆë‹¤.
- ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬ëœ Promiseë“¤ì´ ëª¨ë‘ fulfilled ìƒíƒœê°€ ë˜ë©´ `Promise.all()`ì´ ë¦¬í„´í•˜ëŠ” Promiseë„ fulfilled ìƒíƒœê°€ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬ë˜ëŠ” Promiseì˜ ì„±ê³µ ê²°ê´ê°’ë“¤ë¡œ ì´ë£¨ì–´ì§„ ë°°ì—´ì„ ê²°ê´ê°’ìœ¼ë¡œ ê°–ê²Œ ë©ë‹ˆë‹¤.
- ì•„ê·œë¨¼íŠ¸ë¡œ ì „ë‹¬ëœ Promise ì¤‘ í•˜ë‚˜ë¼ë„ rejected ìƒíƒœê°€ ë˜ë©´ `Promise.all()`ì´ ë¦¬í„´í•˜ëŠ” PromiseëŠ” rejected ìƒíƒœê°€ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  rejectedëœ Promiseì˜ ê²°ê´ê°’(ì˜¤ë¥˜)ì„ ê²°ê´ê°’ìœ¼ë¡œ ê°–ê²Œ ë©ë‹ˆë‹¤.

> `Promise.all()`ì€ ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì„ í•œêº¼ë²ˆì— ì²˜ë¦¬í•  ë•Œ ìœ ìš©í•˜ê²Œ ì“°ì…ë‹ˆë‹¤.
```js
async function getEmployee(id) {
  const response = await fetch(`https://learn.codeit.kr/api/employees/${id}`);
  const data = await response.json();
  return data;
}

const promises = [];

for (let i = 1; i < 11; i++) {
  promises.push(getEmployee(i));
}

let employees;

try {
  employees = await Promise.all(promises);
} catch (error) {
  console.log(error);
}

console.log(employees);
```
```
[
  {
    id: 1,
    name: 'Jason',
    email: 'jason@codeitmall.kr',
    department: 'engineering'
  },
  {
    id: 2,
    name: 'Alice',
    email: 'alice@codeitmall.kr',
    department: 'engineering'
  },
  ...
]
```